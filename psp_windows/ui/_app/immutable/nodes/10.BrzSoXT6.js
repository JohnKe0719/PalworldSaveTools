import{l as Y,h as ee,c as G,b as o,p as u,f as c,i as D,r as he,d as U,g as be}from"../chunks/CAJyC1Oe.js";import{f as J,p as ae,c as t,b as d,t as T,g,u as V,e as te,r as s,n as q,d as ye,s as $e}from"../chunks/BNhJgPkb.js";import{I as se,b as re,l as we,g as ze,h as Ie,T as X,e as oe,M as ne,m as le}from"../chunks/E3TZ2KYB.js";import{b as W,a as Ce,d as Z,r as Fe}from"../chunks/DYcuc4uV.js";import{b as Ae}from"../chunks/eyUwpD9D.js";import{g as ie}from"../chunks/Cj9tYCJl.js";function Me(h,e){const l=Y(e,["children","$$slots","$$events","$$legacy"]);se(h,ee({name:"download"},()=>l,{iconNode:[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}],["polyline",{points:"7 10 12 15 17 10"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3"}]],children:(b,y)=>{var f=G(),$=J(f);re($,e,"default",{},null),o(b,f)},$$slots:{default:!0}}))}function Pe(h,e){const l=Y(e,["children","$$slots","$$events","$$legacy"]);se(h,ee({name:"folder-archive"},()=>l,{iconNode:[["circle",{cx:"15",cy:"19",r:"2"}],["path",{d:"M20.9 19.8A2 2 0 0 0 22 18V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2h5.1"}],["path",{d:"M15 11v-1"}],["path",{d:"M15 17v-2"}]],children:(b,y)=>{var f=G(),$=J(f);re($,e,"default",{},null),o(b,f)},$$slots:{default:!0}}))}var De=c('<div class="dropzone-lead mb-4"><!></div>'),Se=c("<strong>Upload a file</strong> or drag and drop",1),ke=c('<div class="mt-4 flex flex-row items-center justify-center space-x-2"><strong> </strong> <span> </span></div>'),Ue=c('<small class="dropzone-meta opacity-75"><!></small>'),je=c('<div data-testid="file-dropzone"><input/> <div><div><!> <div class="dropzone-message"><!> <div class="mt-2 flex items-center justify-center"><!></div> <!></div> <!></div></div></div>');function Be(h,e){ae(e,!0);let l=u(e,"files",15),v=u(e,"border",3,"border-2 border-dashed"),b=u(e,"padding",3,"p-4 py-8"),y=u(e,"rounded",3,"rounded-container-token"),f=u(e,"regionInterface",3,""),$=u(e,"regionInterfaceText",3,""),j=u(e,"baseClass",3,""),B=u(e,"inputClass",3,""),L=u(e,"interfaceClass",3,""),N=u(e,"accept",3,".zip"),O=he(e,["$$slots","$$events","$$legacy","files","name","border","padding","rounded","regionInterface","regionInterfaceText","baseClass","inputClass","interfaceClass","lead","message","meta","accept","onUpload"]),n;const i="textarea relative flex justify-center items-center",x="w-full absolute top-0 left-0 right-0 bottom-0 z-1 opacity-0 disabled:opacity-0! cursor-pointer",C="flex justify-center items-center text-center";let F=V(()=>`${i} ${v()} ${b()} ${y()} ${j()}`),_=V(()=>`${x} ${B()}`),p=V(()=>`${C} ${L()}`);function A(){const{class:a,...r}=O;return r}var M=je();let S;var w=t(M);Fe(w);let k;Ae(w,a=>n=a,()=>n);var z=d(w,2),P=t(z),I=t(P);{var E=a=>{var r=De(),m=t(r);Z(m,()=>e.lead),s(r),o(a,r)};D(I,a=>{e.lead&&a(E)})}var H=d(I,2),K=t(H);{var de=a=>{var r=G(),m=J(r);Z(m,()=>e.message),o(a,r)},ce=a=>{var r=Se();q(),o(a,r)};D(K,a=>{e.message?a(de):a(ce,!1)})}var R=d(K,2),ve=t(R);Pe(ve,{class:"h-24 w-24"}),s(R);var fe=d(R,2);{var pe=a=>{var r=ke(),m=t(r),me=t(m,!0);s(m);var Q=d(m,2),ge=t(Q);s(Q),s(r),T(xe=>{U(me,l()[0].name),U(ge,`(${xe??""} MB)`)},[()=>(l()[0].size/1024/1024).toFixed(2)]),o(a,r)};D(fe,a=>{l()&&a(pe)})}s(H);var ue=d(H,2);{var _e=a=>{var r=Ue(),m=t(r);Z(m,()=>e.meta),s(r),o(a,r)};D(ue,a=>{e.meta&&a(_e)})}s(P),s(z),s(M),T((a,r)=>{S=W(M,1,`dropzone ${g(F)??""}`,null,S,a),k=Ce(w,k,{type:"file",name:e.name,class:`dropzone-input ${g(_)??""}`,...r,accept:N(),multiple:!1}),W(z,1,`dropzone-interface ${g(p)??""} ${f()??""}`),W(P,1,`dropzone-interface-text ${$()??""}`)},[()=>({"opacity-50":e.disabled}),A]),we(w,l),o(h,M),te()}async function Le(){oe(ne.DOWNLOAD_SAVE_FILE),await ie("/loading"),le("Starting to cook üßë‚Äçüç≥...")}var Te=c("<span>Download modified Level.sav file</span>"),Ne=c('<button class="btn preset-filled-primary-500 font-bold"><!> Download</button>'),Oe=c('<div class="flex"><div class="flex grow flex-col"><h4 class="h4">Current Save File</h4> <p class="text"><strong>File:</strong> </p> <p class="text"><strong>Size:</strong> </p></div> <div class="flex flex-col space-y-2"><!></div></div>'),Ee=c('<h3 class="h3">Click to upload your zipped save files</h3> <span>or drag and drop your zip file here</span>',1),He=c('<button class="btn preset-filled-primary-500 font-bold">Upload</button>'),Re=c("<span> </span>"),Ve=c('<div class="mt-2 flex flex-col"><!></div>'),We=c('<div class="flex h-full w-full flex-col items-center justify-center space-y-4"><!> <div class="flex w-1/3 flex-row justify-center"><div class="flex w-full flex-col items-center"><!> <!></div></div></div>');function Xe(h,e){ae(e,!0);let l=ze(),v=$e(void 0);async function b(){if(!g(v))return;await ie("/loading"),l.resetState(),le("Uploading zip file üöÄ...");const n=new FileReader;n.onload=function(){const i=n.result,x=new Uint8Array(i);oe(ne.LOAD_ZIP_FILE,Array.from(x))},n.readAsArrayBuffer(g(v)[0])}var y=We(),f=t(y);{var $=n=>{Ie(n,{class:"w-1/3",children:(i,x)=>{var C=Oe(),F=t(C),_=d(t(F),2),p=d(t(_));s(_);var A=d(_,2),M=d(t(A));s(A),s(F);var S=d(F,2),w=t(S);X(w,{popup:z=>{var P=Te();o(z,P)},children:(z,P)=>{var I=Ne();I.__click=[Le];var E=t(I);Me(E,{}),q(),s(I),o(z,I)},$$slots:{popup:!0,default:!0}}),s(S),s(C),T(k=>{U(p,` ${l.saveFile.name??""}`),U(M,` ${k??""} MB`)},[()=>(l.saveFile.size/1024/1024).toFixed(2)]),o(i,C)},$$slots:{default:!0}})};D(f,n=>{l.saveFile&&n($)})}var j=d(f,2),B=t(j),L=t(B);Be(L,{baseClass:"w-full hover:bg-surface-800",name:"file",get files(){return g(v)},set files(i){ye(v,i,!0)},message:i=>{var x=Ee();q(2),o(i,x)},$$slots:{message:!0}});var N=d(L,2);{var O=n=>{var i=Ve(),x=t(i);X(x,{children:_=>{var p=He();p.__click=b,o(_,p)},popup:_=>{var p=Re(),A=t(p);s(p),T(()=>U(A,`Upload ${(g(v)?g(v)[0].name:"")??""}`)),o(_,p)},$$slots:{default:!0,popup:!0}}),s(i),o(n,i)};D(N,n=>{g(v)&&n(O)})}s(B),s(j),s(y),o(h,y),te()}be(["click"]);export{Xe as component};
