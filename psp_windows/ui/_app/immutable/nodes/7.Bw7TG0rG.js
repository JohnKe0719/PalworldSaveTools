import{l as cs,h as ds,c as R,b as l,f as u,i as H,d as h,g as us,t as as}from"../chunks/CAJyC1Oe.js";import{f as K,p as os,s as _s,a as fs,m as ns,d as es,b as d,c as s,r as a,e as vs,o as ts,g as _,t as M,u as L,v as ms,w as gs}from"../chunks/BNhJgPkb.js";import{I as xs,b as hs,L as bs,e as is,M as ps,f as J,A as Q,g as Ss,h as ys,T as ls,c as G,j as rs,P as ws}from"../chunks/E3TZ2KYB.js";import{s as Ps,c as N,b as X}from"../chunks/DYcuc4uV.js";import{g as As}from"../chunks/Cj9tYCJl.js";function Is(I,i){const w=cs(i,["children","$$slots","$$events","$$legacy"]);xs(I,ds({name:"users"},()=>w,{iconNode:[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}],["circle",{cx:"9",cy:"7",r:"4"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75"}]],children:(j,F)=>{var k=R(),g=K(k);hs(g,i,"default",{},null),l(j,k)},$$slots:{default:!0}}))}var js=u('<div class="flex w-full"><span class="grow font-bold">World Name</span> <span class="font-bold">Players</span></div>'),ks=u('<div class="flex w-full items-center"><span class="grow"> </span> <div class="flex items-center space-x-2"><!> <span> </span></div></div>'),Os=u('<div class="flex flex-col"><span class="font-bold"> </span> <span> </span> <span> </span></div>'),$s=u('<div class="flex flex-col space-y-4"><h2 class="h2">Available Saves</h2> <!></div>');function Es(I,i){os(i,!0);let w=_s(fs([]));async function o(g){console.log("handleSelectSave",g),is(ps.SELECT_GAMEPASS_SAVE,g.save_id)}ns(()=>{es(w,Object.values(i.saves),!0)});var j=$s(),F=d(s(j),2);{var k=g=>{bs(g,{baseClass:"bg-surface-800",idKey:"save_id",canSelect:!1,headerClass:"",onselect:o,get items(){return _(w)},set items(f){es(w,f,!0)},listHeader:f=>{var x=js();l(f,x)},listItem:(f,x=ts)=>{var b=ks(),S=s(b),t=s(S,!0);a(S);var e=d(S,2),n=s(e);Is(n,{size:16});var p=d(n,2),v=s(p,!0);a(p),a(e),a(b),M(()=>{h(t,x().world_name),h(v,x().player_count)}),l(f,b)},listItemPopup:(f,x=ts)=>{var b=Os(),S=s(b),t=s(S,!0);a(S);var e=d(S,2),n=s(e);a(e);var p=d(e,2),v=s(p);a(p),a(b),M(()=>{h(t,x().world_name),h(n,`Save ID: ${x().save_id??""}`),h(v,`Players: ${x().player_count??""}`)}),l(f,b)},$$slots:{listHeader:!0,listItem:!0,listItemPopup:!0}})};H(F,g=>{i.saves&&Object.keys(i.saves).length>0&&g(k)})}a(j),l(I,j),vs()}var Cs=u('<div class="flex flex-col p-4"><h4 class="h4">Steam</h4> <p>Find and select your Level.sav file.</p></div>'),Ts=(I,i)=>i("steam"),Ls=u("<button><!></button>"),Ms=u('<div class="flex flex-col p-4"><h4 class="h4">XBOX Game Pass</h4> <p>Find and select your container.index file</p></div>'),Fs=(I,i)=>i("gamepass"),zs=u("<button><!></button>"),Ds=u('<div class="relative flex flex-col"><div class="relative"><img alt="Choice"/> <div><!> <!></div></div></div>'),Hs=u('<div class="grid grid-cols-[auto_1fr]"><span class="font-bold">World Name:</span> <span class="text-end"> </span> <span class="font-bold">Players:</span> <span class="text-end"> </span> <span class="font-bold">Pals:</span> <span class="text-end"> </span> <span class="font-bold">Guilds:</span> <span class="text-end"> </span> <span class="font-bold">Bases:</span> <span class="text-end"> </span></div>'),Bs=u("<!> <!>",1),Gs=u('<div class="relative flex h-full w-full items-center justify-center"><!></div>'),Ns=u('<div class="flex h-full w-full flex-col items-center justify-center space-y-4"><!></div>');function qs(I,i){os(i,!0);const w=(t,e)=>{let n=ms(()=>gs(e==null?void 0:e(),"lg"));var p=Ds();const v=L(()=>_(n)==="lg"?"h-[600px]":"h-[400px]"),P=L(()=>_(n)==="lg"?"inset-8":"inset-4"),O=L(()=>_(n)==="lg"?"top-[420px]":"top-[280px]"),C=L(()=>_(n)==="lg"?"h-24 w-24":"h-16 w-16");var B=s(p),$=s(B);Ps($,"src",g);var z=d($,2),T=s(z);ls(T,{popupClass:"p-0 bg-surface-600 max-w-96",rounded:"rounded-none",position:"left",useArrow:!1,popup:m=>{var A=Cs();l(m,A)},children:(m,A)=>{var c=Ls();c.__click=[Ts,U];var D=s(c);{var W=r=>{var y=R(),Y=K(y);rs(Y,()=>F),l(r,y)},q=r=>{var y=as("Steam");l(r,y)};H(D,r=>{F?r(W):r(q,!1)})}a(c),M(r=>X(c,1,r),[()=>N(G("rounded-full bg-transparent transition-transform hover:scale-110",_(C)))]),l(m,c)},$$slots:{popup:!0,default:!0}});var V=d(T,2);ls(V,{popupClass:"p-0 bg-surface-600 max-w-96",rounded:"rounded-none",position:"right",useArrow:!1,popup:m=>{var A=Ms();l(m,A)},children:(m,A)=>{var c=zs();c.__click=[Fs,U];var D=s(c);{var W=r=>{var y=R(),Y=K(y);rs(Y,()=>k),l(r,y)},q=r=>{var y=as("Xbox");l(r,y)};H(D,r=>{k?r(W):r(q,!1)})}a(c),M(r=>X(c,1,r),[()=>N(G("-rotate-90 rounded-full bg-transparent transition-transform hover:scale-110",_(C)))]),l(m,c)},$$slots:{popup:!0,default:!0}}),a(z),a(B),a(p),M((E,m)=>{X($,1,E),X(z,1,m)},[()=>N(G("w-auto",_(v))),()=>N(G("absolute flex items-center justify-between px-12",_(P),_(O)))]),l(t,p)},o=Ss(),j=ws==="true",F=J.loadSvg(`${Q}/img/app/steam.svg`),k=J.loadSvg(`${Q}/img/app/xbox.svg`),g=J.loadImage(`${Q}/img/app/morpheus.png`),Z=L(()=>Object.values(o.players).reduce((t,e)=>t+(e.pals?Object.values(e.pals).length:0),0)),ss=L(()=>Object.values(o.guilds).reduce((t,e)=>t+(e.bases?Object.values(e.bases).length:0),0));async function U(t){await As("/loading"),is(ps.SELECT_SAVE,{type:t,local:j})}ns(()=>{});var f=Ns(),x=s(f);{var b=t=>{var e=Bs(),n=K(e);w(n,()=>"sm");var p=d(n,2);ys(p,{class:"min-w-96",children:(v,P)=>{var O=Hs(),C=d(s(O),2),B=s(C,!0);a(C);var $=d(C,4),z=s($,!0);a($);var T=d($,4),V=s(T,!0);a(T);var E=d(T,4),m=s(E,!0);a(E);var A=d(E,4),c=s(A,!0);a(A),a(O),M(D=>{h(B,o.saveFile.world_name),h(z,o.playerSaveFiles.length),h(V,_(Z)),h(m,D),h(c,_(ss))},[()=>Object.values(o.guilds).length]),l(v,O)},$$slots:{default:!0}}),l(t,e)},S=(t,e)=>{{var n=v=>{Es(v,{get saves(){return o.gamepassSaves},set saves(P){o.gamepassSaves=P}})},p=v=>{var P=Gs(),O=s(P);w(O),a(P),l(v,P)};H(t,v=>{o.gamepassSaves&&Object.keys(o.gamepassSaves).length>0?v(n):v(p,!1)},e)}};H(x,t=>{o.saveFile&&o.playerSaveFiles?t(b):t(S,!1)})}a(f),l(I,f),vs()}us(["click"]);export{qs as component};
